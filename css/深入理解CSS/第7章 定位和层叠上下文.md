# 第 7 章 定位和层叠上下文

`position` 属性用于指定元素在文档中的定位方式，**`top, right, bottom, left` 则决定了该元素的最终位置（设置这四个值还隐式地定义了元素的宽高 ）**。

定位允许你从正常的文档流布局中取出元素，并使它们具有不同的行为，例如：放在另一个元素的上面，或者始终保持在浏览器视窗内的同一位置。

## 静态定位 `static`

默认值，没有定位，元素出现在正常文档流。此时 `top, right, bottom, left` 和 `z-index` 属性无效。

## 相对定位 `relative`

1. 相对于元素没有定位时的位置

2. 元素**未脱离正常文档流**，仍然保留元素原本在文档流中的位置，不影响其他元素的偏移。（会在元素未添加定位时所在位置留下空白）

![alt text](https://github.com/yaoshaohua/markdowndocs/blob/main/assets/css/7-4-1.png?raw=true)

## 绝对定位 `absolute`

1. 相对于**最近的非 `static` 祖先元素**，非 `static` 祖先元素不存在时，则相对于根元素 `html`

2. 元素**脱离正常文档流**，并不为元素预留空间

## 固定定位 `fixed`

元素的位置在屏幕滚动时不会改变

1. 相对于**视口（viewport）**

2. 元素**脱离正常文档流**，并不为元素预留空间

3. 创建新的层叠上下文

<!-- 搭配 `top, right, bottom, left` 四个属性一起使用，否则初始位置就是元素的默认位置

 -->

## 粘性定位 `sticky`

`relative` 和 `fixed` 的结合，在元素滚动到距离祖先元素小于设置的阈值之前，元素为相对定位，之后为固定定位，

1. 相对于最近的滚动祖先（`overflow` 是 `hidden、scroll、auto、overlay`）和最近的块级祖先

2. 元素**未脱离正常文档流**，仍然保留元素原本在文档流中的位置，不影响其他元素的偏移。

3. 必须指定 `top, right, bottom, left` 四个阈值其中之一，才可使粘性定位生效，否则等同于相对定位 `relative`

   - 水平滚动必须指定 `left/right`，垂直滚动必须指定 `top/bottom`

   - `sticky` 的 `top, right, bottom, left` 并不是传统定位的意义而是 `sticky` 定位状态改变的阈值

4. 作用范围不会超出父元素，如果父元素完全脱离视口（完全不可见），粘性元素也不可见，切换回相对定位

5. 创建新的层叠上下文

在 `viewport` 视口滚动到元素 `top` 距离小于 `10px` 之前，元素为相对定位。之后，元素将固定在与顶部距离 `10px` 的位置，直到 `viewport` 视口回滚到阈值以下

```css
#one {
  position: sticky;
  top: 10px;
}
```

## 层叠上下文和 `z-index`
